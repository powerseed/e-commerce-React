{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\power\\\\Desktop\\\\Vue\\\\react_e-commerce\\\\e-commerce\\\\src\\\\components\\\\OrderDetail.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport PaypalButton from \"./PaypalButton\";\n\nfunction OrderDetail(props) {\n  const {\n    userInfo\n  } = useSelector(state => state.user);\n  const [order, setOrder] = useState({});\n  const [items, setItems] = useState([]);\n  const itemsHtml = items.map(item => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: item._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 13,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/products/\" + item._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/images/\" + item.image,\n      alt: \"\",\n      style: {\n        height: \"100px\",\n        width: \"auto\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/products/\" + item._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 21\n      }\n    }, item.name)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 17\n      }\n    }, \"$\", item.price));\n  });\n\n  const calculateTotal = () => {\n    let total = 0;\n    items.forEach(item => {\n      total += item.qty * item.price;\n    });\n    return total;\n  };\n\n  useEffect(() => {\n    if (!userInfo) {\n      props.history.push(\"/\");\n      return;\n    }\n\n    const fetchOrderAndItems = async () => {\n      const order = await axios.get(\"/api/orders/\" + props.match.params.id, {\n        headers: {\n          authorization: \"Bearer \" + userInfo.token\n        }\n      });\n      const order_data = order.data;\n      setOrder(order_data);\n      let items_array = [];\n      order_data.orderItems.forEach(async orderItem => {\n        const {\n          data\n        } = await axios.get(\"/api/products/\" + orderItem.productId);\n        const itemsHtml = items.map(item => {\n          return /*#__PURE__*/React.createElement(\"tr\", {\n            key: item._id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 28\n            }\n          }, /*#__PURE__*/React.createElement(\"th\", {\n            scope: \"row\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(Link, {\n            to: \"/products/\" + item._id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(\"img\", {\n            src: \"/images/\" + item.image,\n            alt: \"\",\n            style: {\n              height: \"100px\",\n              width: \"auto\"\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 33\n            }\n          }))), /*#__PURE__*/React.createElement(\"td\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(Link, {\n            to: \"/products/\" + item._id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 29\n            }\n          }, item.name)), /*#__PURE__*/React.createElement(\"td\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 25\n            }\n          }, \"$\", item.price));\n        });\n        items_array.push(data);\n      });\n      setItems(items_array);\n    };\n\n    fetchOrderAndItems();\n  }, [userInfo]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, \"Shipping Address\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, order.shipping ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 33\n    }\n  }, order.shipping.address, \", \", order.shipping.city, \", \", order.shipping.postal, \", \", order.shipping.country) : null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, \"Payment Method\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }, order.payment ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 29\n    }\n  }, order.payment.paymentMethod) : null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mt-4 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 21\n    }\n  }, \"Order items\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    style: {\n      border: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      border: \"none\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      border: \"none\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 33\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      border: \"none\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 33\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      border: \"none\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 33\n    }\n  }, \"Qty\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      border: \"none\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 33\n    }\n  }, \"Subtotal\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      border: \"none\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 33\n    }\n  }))), itemsHtml > 0 ? /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 37\n    }\n  }, itemsHtml) : /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    className: \"text-center\",\n    scope: \"row\",\n    colSpan: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 41\n    }\n  }, \"Your cart is empty. \")))))))));\n}\n\nexport default OrderDetail;","map":{"version":3,"sources":["C:/Users/power/Desktop/Vue/react_e-commerce/e-commerce/src/components/OrderDetail.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Link","axios","PaypalButton","OrderDetail","props","userInfo","state","user","order","setOrder","items","setItems","itemsHtml","map","item","_id","image","height","width","name","price","calculateTotal","total","forEach","qty","history","push","fetchOrderAndItems","get","match","params","id","headers","authorization","token","order_data","data","items_array","orderItems","orderItem","productId","shipping","address","city","postal","country","payment","paymentMethod","border"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {Link} from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport PaypalButton from \"./PaypalButton\";\r\n\r\nfunction OrderDetail(props) {\r\n    const {userInfo} = useSelector(state => state.user)\r\n    const [order, setOrder] = useState({});\r\n    const [items, setItems] = useState([]);\r\n\r\n    const itemsHtml = items.map(item => {\r\n        return <tr key={item._id}>\r\n                <th scope=\"row\">\r\n                    <Link to={\"/products/\" + item._id}>\r\n                        <img src={\"/images/\" + item.image} alt=\"\" style={{height: \"100px\", width: \"auto\"}}/>\r\n                    </Link>\r\n                </th>\r\n                <td>\r\n                    <Link to={\"/products/\" + item._id}>\r\n                        {item.name}\r\n                    </Link>\r\n                </td>\r\n                <td>${item.price}</td>\r\n                {/*<td>{item.qty}</td>*/}\r\n                {/*<td>${item.price * item.qty}</td>*/}\r\n            </tr>\r\n    })\r\n\r\n    const calculateTotal = () => {\r\n        let total = 0;\r\n\r\n        items.forEach((item) => {\r\n            total += item.qty * item.price;\r\n        })\r\n\r\n        return total;\r\n    }\r\n\r\n    useEffect(()=>{\r\n        if(!userInfo){\r\n            props.history.push(\"/\")\r\n            return\r\n        }\r\n\r\n        const fetchOrderAndItems = async () => {\r\n            const order = await axios.get(\"/api/orders/\" + props.match.params.id, {\r\n                headers:{\r\n                    authorization: \"Bearer \" + userInfo.token\r\n                }\r\n            });\r\n            const order_data = order.data\r\n            setOrder(order_data)\r\n\r\n            let items_array = [];\r\n            order_data.orderItems.forEach( async (orderItem) => {\r\n                const {data} = await axios.get(\"/api/products/\" + orderItem.productId);\r\n\r\n                const itemsHtml = items.map(item => {\r\n                    return <tr key={item._id}>\r\n                        <th scope=\"row\">\r\n                            <Link to={\"/products/\" + item._id}>\r\n                                <img src={\"/images/\" + item.image} alt=\"\" style={{height: \"100px\", width: \"auto\"}}/>\r\n                            </Link>\r\n                        </th>\r\n                        <td>\r\n                            <Link to={\"/products/\" + item._id}>\r\n                                {item.name}\r\n                            </Link>\r\n                        </td>\r\n                        <td>${item.price}</td>\r\n                        {/*<td>{item.qty}</td>*/}\r\n                        {/*<td>${item.price * item.qty}</td>*/}\r\n                    </tr>\r\n                })\r\n\r\n                items_array.push(data);\r\n            })\r\n\r\n\r\n            setItems(items_array);\r\n        }\r\n\r\n        fetchOrderAndItems();\r\n    }, [userInfo]);\r\n\r\n    return <div className=\"container mt-4\">\r\n        <div className=\"row\">\r\n            <div className=\"col-8\">\r\n                <div className=\"card mt-4\">\r\n                    <div className=\"card-header\">\r\n                        Shipping Address\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                        {\r\n                            order.shipping ?\r\n                                <p className=\"card-text\">{order.shipping.address}, {order.shipping.city}, {order.shipping.postal}, {order.shipping.country}</p>\r\n                            : null\r\n                        }\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"card mt-4\">\r\n                    <div className=\"card-header\">\r\n                        Payment Method\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                        {\r\n                            order.payment ?\r\n                            <p className=\"card-text\">{order.payment.paymentMethod}</p>\r\n                                : null\r\n                        }\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"card mt-4 mb-4\">\r\n                    <div className=\"card-header\">\r\n                        Order items\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                        <table className=\"table text-center\">\r\n                            <thead style={{border: \"none\"}}>\r\n                            <tr>\r\n                                <th style={{border: \"none\"}} scope=\"col\"></th>\r\n                                <th style={{border: \"none\"}} scope=\"col\">Name</th>\r\n                                <th style={{border: \"none\"}} scope=\"col\">Price</th>\r\n                                <th style={{border: \"none\"}} scope=\"col\">Qty</th>\r\n                                <th style={{border: \"none\"}} scope=\"col\">Subtotal</th>\r\n                                <th style={{border: \"none\"}} scope=\"col\"></th>\r\n                            </tr>\r\n                            </thead>\r\n                            {\r\n                                itemsHtml > 0?\r\n                                    <tbody>\r\n                                        {/*<tr className=\"text-center\">*/}\r\n                                        {/*    <th className=\"text-center\" scope=\"row\" colSpan=\"6\">qwe</th>*/}\r\n                                        {/*</tr>*/}\r\n                                    {itemsHtml}\r\n                                    </tbody>\r\n                                    :\r\n                                    <tbody>\r\n                                    <tr className=\"text-center\">\r\n                                        <th className=\"text-center\" scope=\"row\" colSpan=\"6\">Your cart is empty. </th>\r\n                                    </tr>\r\n                                    </tbody>\r\n                            }\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default OrderDetail\r\n"]},"metadata":{},"sourceType":"module"}