{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\power\\\\Desktop\\\\Vue\\\\react_e-commerce\\\\e-commerce\\\\src\\\\components\\\\OrderDetail.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport PaypalButton from \"./PaypalButton\";\n\nfunction OrderDetail(props) {\n  const {\n    userInfo\n  } = useSelector(state => state.user);\n  const [order, setOrder] = useState({});\n  const [items, setItems] = useState([]); // const itemsHtml = items.map(item => {\n  //     return <tr key={item._id}>\n  //             <th scope=\"row\">\n  //                 <Link to={\"/products/\" + item._id}>\n  //                     <img src={\"/images/\" + item.image} alt=\"\" style={{height: \"100px\", width: \"auto\"}}/>\n  //                 </Link>\n  //             </th>\n  //             <td>\n  //                 <Link to={\"/products/\" + item._id}>\n  //                     {item.name}\n  //                 </Link>\n  //             </td>\n  //             <td>${item.price}</td>\n  //             {/*<td>{item.qty}</td>*/}\n  //             {/*<td>${item.price * item.qty}</td>*/}\n  //         </tr>\n  // })\n\n  const calculateTotal = () => {\n    let total = 0;\n    items.forEach(item => {\n      total += item.qty * item.price;\n    });\n    return total;\n  };\n\n  useEffect(() => {\n    if (!userInfo) {\n      props.history.push(\"/\");\n      return;\n    }\n\n    const fetchOrderAndItems = async () => {\n      const {\n        data\n      } = await axios.get(\"/api/orders/\" + props.match.params.id, {\n        headers: {\n          authorization: \"Bearer \" + userInfo.token\n        }\n      });\n      setOrder(data); // let items_array = [];\n      // order_data.orderItems.forEach( async (orderItem) => {\n      //     const {data} = await axios.get(\"/api/products/\" + orderItem.productId);\n      //     items_array.push(data);\n      // })\n\n      Promise.all(data.orderItems.map(orderItem => {\n        const {\n          data\n        } = axios.get(`/api/products/${orderItem.productId}`);\n        return data;\n      })).then(results => setItems(results)); // console.log(\"items_array.length: \" + items_array.length);\n      // console.log(items_array);\n    };\n\n    fetchOrderAndItems();\n  }, [userInfo]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, \"Shipping Address\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, order.shipping ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 33\n    }\n  }, order.shipping.address, \", \", order.shipping.city, \", \", order.shipping.postal, \", \", order.shipping.country) : null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, \"Payment Method\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, order.payment ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 29\n    }\n  }, order.payment.paymentMethod) : null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mt-4 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }, \"Order items\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    style: {\n      border: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      border: \"none\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      border: \"none\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 33\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      border: \"none\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 33\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      border: \"none\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 33\n    }\n  }, \"Qty\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      border: \"none\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 33\n    }\n  }, \"Subtotal\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      border: \"none\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 33\n    }\n  }))), itemsHtml.length > 0 ? /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 37\n    }\n  }, itemsHtml) : /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    className: \"text-center\",\n    scope: \"row\",\n    colSpan: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 41\n    }\n  }, \"Your cart is empty. \")))))))));\n}\n\nexport default OrderDetail;","map":{"version":3,"sources":["C:/Users/power/Desktop/Vue/react_e-commerce/e-commerce/src/components/OrderDetail.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Link","axios","PaypalButton","OrderDetail","props","userInfo","state","user","order","setOrder","items","setItems","calculateTotal","total","forEach","item","qty","price","history","push","fetchOrderAndItems","data","get","match","params","id","headers","authorization","token","Promise","all","orderItems","map","orderItem","productId","then","results","shipping","address","city","postal","country","payment","paymentMethod","border","itemsHtml","length"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,aAAvC;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;;AAEA,SAASC,WAAT,CAAqBC,KAArB,EAA4B;AACxB,QAAM;AAACC,IAAAA;AAAD,MAAaN,WAAW,CAACO,KAAK,IAAIA,KAAK,CAACC,IAAhB,CAA9B;AACA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBZ,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACa,KAAD,EAAQC,QAAR,IAAoBd,QAAQ,CAAC,EAAD,CAAlC,CAHwB,CAKxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAMe,cAAc,GAAG,MAAM;AACzB,QAAIC,KAAK,GAAG,CAAZ;AAEAH,IAAAA,KAAK,CAACI,OAAN,CAAeC,IAAD,IAAU;AACpBF,MAAAA,KAAK,IAAIE,IAAI,CAACC,GAAL,GAAWD,IAAI,CAACE,KAAzB;AACH,KAFD;AAIA,WAAOJ,KAAP;AACH,GARD;;AAUAjB,EAAAA,SAAS,CAAC,MAAI;AACV,QAAG,CAACS,QAAJ,EAAa;AACTD,MAAAA,KAAK,CAACc,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACA;AACH;;AAED,UAAMC,kBAAkB,GAAG,YAAY;AACnC,YAAM;AAACC,QAAAA;AAAD,UAAS,MAAMpB,KAAK,CAACqB,GAAN,CAAU,iBAAiBlB,KAAK,CAACmB,KAAN,CAAYC,MAAZ,CAAmBC,EAA9C,EAAkD;AACnEC,QAAAA,OAAO,EAAC;AACJC,UAAAA,aAAa,EAAE,YAAYtB,QAAQ,CAACuB;AADhC;AAD2D,OAAlD,CAArB;AAKAnB,MAAAA,QAAQ,CAACY,IAAD,CAAR,CANmC,CAQnC;AACA;AACA;AACA;AACA;;AACAQ,MAAAA,OAAO,CAACC,GAAR,CACIT,IAAI,CAACU,UAAL,CAAgBC,GAAhB,CAAqBC,SAAD,IAAe;AAC/B,cAAM;AAACZ,UAAAA;AAAD,YAASpB,KAAK,CAACqB,GAAN,CAAW,iBAAgBW,SAAS,CAACC,SAAU,EAA/C,CAAf;AACA,eAAOb,IAAP;AACH,OAHD,CADJ,EAKEc,IALF,CAKOC,OAAO,IAAIzB,QAAQ,CAACyB,OAAD,CAL1B,EAbmC,CAoBnC;AACA;AACH,KAtBD;;AAwBAhB,IAAAA,kBAAkB;AACrB,GA/BQ,EA+BN,CAACf,QAAD,CA/BM,CAAT;AAiCA,sBAAO;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACH;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,eAII;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQG,KAAK,CAAC6B,QAAN,gBACI;AAAG,IAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA0B7B,KAAK,CAAC6B,QAAN,CAAeC,OAAzC,QAAoD9B,KAAK,CAAC6B,QAAN,CAAeE,IAAnE,QAA2E/B,KAAK,CAAC6B,QAAN,CAAeG,MAA1F,QAAoGhC,KAAK,CAAC6B,QAAN,CAAeI,OAAnH,CADJ,GAEE,IAJV,CAJJ,CADJ,eAcI;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAII;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQjC,KAAK,CAACkC,OAAN,gBACA;AAAG,IAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA0BlC,KAAK,CAACkC,OAAN,CAAcC,aAAxC,CADA,GAEM,IAJd,CAJJ,CAdJ,eA2BI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,eAII;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,SAAS,EAAC,mBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,KAAK,EAAE;AAACC,MAAAA,MAAM,EAAE;AAAT,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,KAAK,EAAE;AAACA,MAAAA,MAAM,EAAE;AAAT,KAAX;AAA6B,IAAA,KAAK,EAAC,KAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI;AAAI,IAAA,KAAK,EAAE;AAACA,MAAAA,MAAM,EAAE;AAAT,KAAX;AAA6B,IAAA,KAAK,EAAC,KAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,eAGI;AAAI,IAAA,KAAK,EAAE;AAACA,MAAAA,MAAM,EAAE;AAAT,KAAX;AAA6B,IAAA,KAAK,EAAC,KAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAHJ,eAII;AAAI,IAAA,KAAK,EAAE;AAACA,MAAAA,MAAM,EAAE;AAAT,KAAX;AAA6B,IAAA,KAAK,EAAC,KAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAJJ,eAKI;AAAI,IAAA,KAAK,EAAE;AAACA,MAAAA,MAAM,EAAE;AAAT,KAAX;AAA6B,IAAA,KAAK,EAAC,KAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALJ,eAMI;AAAI,IAAA,KAAK,EAAE;AAACA,MAAAA,MAAM,EAAE;AAAT,KAAX;AAA6B,IAAA,KAAK,EAAC,KAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANJ,CADA,CADJ,EAYQC,SAAS,CAACC,MAAV,GAAmB,CAAnB,gBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKD,SADL,CADJ,gBAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAI,IAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,SAAS,EAAC,aAAd;AAA4B,IAAA,KAAK,EAAC,KAAlC;AAAwC,IAAA,OAAO,EAAC,GAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,CADA,CAjBZ,CADJ,CAJJ,CA3BJ,CADJ,CADG,CAAP;AA+DH;;AAED,eAAe1C,WAAf","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {Link} from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport PaypalButton from \"./PaypalButton\";\r\n\r\nfunction OrderDetail(props) {\r\n    const {userInfo} = useSelector(state => state.user)\r\n    const [order, setOrder] = useState({});\r\n    const [items, setItems] = useState([]);\r\n\r\n    // const itemsHtml = items.map(item => {\r\n    //     return <tr key={item._id}>\r\n    //             <th scope=\"row\">\r\n    //                 <Link to={\"/products/\" + item._id}>\r\n    //                     <img src={\"/images/\" + item.image} alt=\"\" style={{height: \"100px\", width: \"auto\"}}/>\r\n    //                 </Link>\r\n    //             </th>\r\n    //             <td>\r\n    //                 <Link to={\"/products/\" + item._id}>\r\n    //                     {item.name}\r\n    //                 </Link>\r\n    //             </td>\r\n    //             <td>${item.price}</td>\r\n    //             {/*<td>{item.qty}</td>*/}\r\n    //             {/*<td>${item.price * item.qty}</td>*/}\r\n    //         </tr>\r\n    // })\r\n\r\n    const calculateTotal = () => {\r\n        let total = 0;\r\n\r\n        items.forEach((item) => {\r\n            total += item.qty * item.price;\r\n        })\r\n\r\n        return total;\r\n    }\r\n\r\n    useEffect(()=>{\r\n        if(!userInfo){\r\n            props.history.push(\"/\")\r\n            return\r\n        }\r\n\r\n        const fetchOrderAndItems = async () => {\r\n            const {data} = await axios.get(\"/api/orders/\" + props.match.params.id, {\r\n                headers:{\r\n                    authorization: \"Bearer \" + userInfo.token\r\n                }\r\n            });\r\n            setOrder(data)\r\n\r\n            // let items_array = [];\r\n            // order_data.orderItems.forEach( async (orderItem) => {\r\n            //     const {data} = await axios.get(\"/api/products/\" + orderItem.productId);\r\n            //     items_array.push(data);\r\n            // })\r\n            Promise.all(\r\n                data.orderItems.map((orderItem) => {\r\n                    const {data} = axios.get(`/api/products/${orderItem.productId}`)\r\n                    return data\r\n                })\r\n            ).then(results => setItems(results));\r\n\r\n            // console.log(\"items_array.length: \" + items_array.length);\r\n            // console.log(items_array);\r\n        }\r\n\r\n        fetchOrderAndItems();\r\n    }, [userInfo]);\r\n\r\n    return <div className=\"container mt-4\">\r\n        <div className=\"row\">\r\n            <div className=\"col-8\">\r\n                <div className=\"card mt-4\">\r\n                    <div className=\"card-header\">\r\n                        Shipping Address\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                        {\r\n                            order.shipping ?\r\n                                <p className=\"card-text\">{order.shipping.address}, {order.shipping.city}, {order.shipping.postal}, {order.shipping.country}</p>\r\n                            : null\r\n                        }\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"card mt-4\">\r\n                    <div className=\"card-header\">\r\n                        Payment Method\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                        {\r\n                            order.payment ?\r\n                            <p className=\"card-text\">{order.payment.paymentMethod}</p>\r\n                                : null\r\n                        }\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"card mt-4 mb-4\">\r\n                    <div className=\"card-header\">\r\n                        Order items\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                        <table className=\"table text-center\">\r\n                            <thead style={{border: \"none\"}}>\r\n                            <tr>\r\n                                <th style={{border: \"none\"}} scope=\"col\"></th>\r\n                                <th style={{border: \"none\"}} scope=\"col\">Name</th>\r\n                                <th style={{border: \"none\"}} scope=\"col\">Price</th>\r\n                                <th style={{border: \"none\"}} scope=\"col\">Qty</th>\r\n                                <th style={{border: \"none\"}} scope=\"col\">Subtotal</th>\r\n                                <th style={{border: \"none\"}} scope=\"col\"></th>\r\n                            </tr>\r\n                            </thead>\r\n                            {\r\n                                itemsHtml.length > 0?\r\n                                    <tbody>\r\n                                        {itemsHtml}\r\n                                    </tbody>\r\n                                    :\r\n                                    <tbody>\r\n                                    <tr className=\"text-center\">\r\n                                        <th className=\"text-center\" scope=\"row\" colSpan=\"6\">Your cart is empty. </th>\r\n                                    </tr>\r\n                                    </tbody>\r\n                            }\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default OrderDetail\r\n"]},"metadata":{},"sourceType":"module"}