{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\power\\\\Desktop\\\\Vue\\\\react_e-commerce\\\\e-commerce\\\\src\\\\components\\\\Profile.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport Cookie from \"js-cookie\";\n\nfunction Profile(props) {\n  const {\n    userInfo,\n    error\n  } = useSelector(state => state.user);\n  const [user, setUser] = useState({});\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [rePassword, setRePassword] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [postal, setPostal] = useState(\"\");\n  const [country, setCountry] = useState(\"\");\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const populateUserInfo = async () => {\n      const {\n        data\n      } = await axios.get(\"api/users/\" + userInfo._id);\n      setUser(data);\n      setName(data.name);\n      setEmail(data.email);\n      setPassword(data.password);\n      setRePassword(data.password);\n\n      if (data.shipping) {\n        setAddress(data.shipping.address);\n        setCity(data.shipping.city);\n        setPostal(data.shipping.postal);\n        setCountry(data.shipping.country);\n      }\n    };\n\n    populateUserInfo();\n  }, []);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    if (password !== rePassword) {\n      let elements = document.getElementsByClassName(\"invalid-feedback\");\n\n      for (const element of elements) {\n        element.style.display = \"inline\";\n      }\n\n      return;\n    }\n\n    const {\n      data\n    } = await axios.put(\"/api/users/\" + userInfo._id + \"/updateProfile\", {\n      name,\n      email,\n      password\n    });\n    dispatch({\n      type: \"user_register_success\",\n      payload: data\n    });\n    Cookie.set(\"userInfo\", data);\n    await axios.put(\"/api/users/\" + userInfo._id + \"/addShipping\", {\n      address,\n      city,\n      postal,\n      country\n    });\n    dispatch({\n      type: \"create_shipping_info\",\n      payload: {\n        address,\n        city,\n        postal,\n        country\n      }\n    });\n    props.history.push(\"/\");\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-4 col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 25\n    }\n  }, \"Profile\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }\n  }, error && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group alert alert-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 39\n    }\n  }, error), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group col-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"exampleFormControlInput1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 37\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    required: true,\n    value: name,\n    onChange: e => {\n      setName(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group col-7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"exampleFormControlInput1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 37\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    className: \"form-control\",\n    required: true,\n    value: email,\n    onChange: e => {\n      setEmail(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 37\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password1\",\n    className: \"form-control\",\n    value: password,\n    required: true,\n    onChange: e => {\n      setPassword(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 37\n    }\n  }, \"Passwords don't match.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 37\n    }\n  }, \"Re-type Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password2\",\n    className: \"form-control\",\n    value: rePassword,\n    required: true,\n    onChange: e => {\n      setRePassword(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 37\n    }\n  }, \"Passwords don't match.\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 33\n    }\n  }, \"Shipping Address\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"address\",\n    className: \"form-control\",\n    value: address,\n    required: true,\n    onChange: e => {\n      setAddress(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"city\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 37\n    }\n  }, \"City\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"city\",\n    className: \"form-control\",\n    value: city,\n    required: true,\n    onChange: e => {\n      setCity(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"country\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 37\n    }\n  }, \"Country\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"country\",\n    className: \"form-control\",\n    value: country,\n    required: true,\n    onChange: e => {\n      setCountry(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"postal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 37\n    }\n  }, \"Postal\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"postal\",\n    className: \"form-control\",\n    value: postal,\n    required: true,\n    onChange: e => {\n      setPostal(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary btn-block\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 33\n    }\n  }, \"Update\"))))));\n}\n\nexport default Profile;","map":{"version":3,"sources":["C:/Users/power/Desktop/Vue/react_e-commerce/e-commerce/src/components/Profile.js"],"names":["React","useEffect","useState","useDispatch","useSelector","axios","Link","Cookie","Profile","props","userInfo","error","state","user","setUser","name","setName","email","setEmail","password","setPassword","rePassword","setRePassword","address","setAddress","city","setCity","postal","setPostal","country","setCountry","dispatch","populateUserInfo","data","get","_id","shipping","handleSubmit","e","preventDefault","elements","document","getElementsByClassName","element","style","display","put","type","payload","set","history","push","target","value"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Cookie from \"js-cookie\";\r\n\r\nfunction Profile(props) {\r\n    const {userInfo, error} = useSelector(state => state.user);\r\n    const [user, setUser] = useState({});\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [rePassword, setRePassword] = useState(\"\");\r\n\r\n    const [address, setAddress] = useState(\"\");\r\n    const [city, setCity] = useState(\"\");\r\n    const [postal, setPostal] = useState(\"\");\r\n    const [country, setCountry] = useState(\"\");\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        const populateUserInfo = async () => {\r\n            const {data} = await axios.get(\"api/users/\" + userInfo._id);\r\n            setUser(data)\r\n            setName(data.name)\r\n            setEmail(data.email)\r\n            setPassword(data.password)\r\n            setRePassword(data.password)\r\n\r\n            if(data.shipping){\r\n                setAddress(data.shipping.address)\r\n                setCity(data.shipping.city)\r\n                setPostal(data.shipping.postal)\r\n                setCountry(data.shipping.country)\r\n            }\r\n        }\r\n        populateUserInfo();\r\n    }, [])\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n\r\n        if(password !== rePassword){\r\n            let elements = document.getElementsByClassName(\"invalid-feedback\");\r\n            for (const element of elements) {\r\n                element.style.display = \"inline\"\r\n            }\r\n            return\r\n        }\r\n\r\n        const {data} = await axios.put(\"/api/users/\" + userInfo._id + \"/updateProfile\", {name, email, password});\r\n\r\n        dispatch({\r\n            type: \"user_register_success\",\r\n            payload: data\r\n        });\r\n\r\n        Cookie.set(\"userInfo\", data);\r\n\r\n        await axios.put(\"/api/users/\" + userInfo._id + \"/addShipping\", {address, city, postal, country});\r\n\r\n        dispatch({\r\n            type: \"create_shipping_info\",\r\n            payload: {address, city, postal, country}\r\n        })\r\n\r\n        props.history.push(\"/\")\r\n    }\r\n\r\n    return <div className=\"container mt-4 col-6\">\r\n                <div className=\"card mt-4\">\r\n                    <div className=\"card-header\">\r\n                        <h5>Profile</h5>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                        <form onSubmit={handleSubmit}>\r\n                            {error && <div className=\"form-group alert alert-danger\">{error}</div>}\r\n                            <div className=\"form-row\">\r\n                                <div className=\"form-group col-5\">\r\n                                    <label htmlFor=\"exampleFormControlInput1\">Name</label>\r\n                                    <input type=\"text\" className=\"form-control\" required value={name} onChange={(e) => {setName(e.target.value)}}/>\r\n                                </div>\r\n                                <div className=\"form-group col-7\">\r\n                                    <label htmlFor=\"exampleFormControlInput1\">Email</label>\r\n                                    <input type=\"email\" className=\"form-control\" required value={email} onChange={(e) => {setEmail(e.target.value)}}/>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"form-row\">\r\n                                <div className=\"form-group col-6\">\r\n                                    <label htmlFor=\"password1\">Password</label>\r\n                                    <input type=\"password\" id=\"password1\" className=\"form-control\" value={password} required onChange={(e) => {setPassword(e.target.value)}}/>\r\n                                    <div className=\"invalid-feedback\">\r\n                                        Passwords don't match.\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"form-group col-6\">\r\n                                    <label htmlFor=\"password2\">Re-type Password</label>\r\n                                    <input type=\"password\" id=\"password2\" className=\"form-control\" value={rePassword} required onChange={(e) => {setRePassword(e.target.value)}}/>\r\n                                    <div className=\"invalid-feedback\">\r\n                                        Passwords don't match.\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"address\">Shipping Address</label>\r\n                                <input type=\"text\" id=\"address\" className=\"form-control\" value={address} required onChange={(e) => {setAddress(e.target.value)}}/>\r\n                            </div>\r\n\r\n                            <div className=\"form-row\">\r\n                                <div className=\"form-group col-4\">\r\n                                    <label htmlFor=\"city\">City</label>\r\n                                    <input type=\"text\" id=\"city\" className=\"form-control\" value={city} required onChange={(e) => {setCity(e.target.value)}}/>\r\n                                </div>\r\n\r\n                                <div className=\"form-group col-4\">\r\n                                    <label htmlFor=\"country\">Country</label>\r\n                                    <input type=\"text\" id=\"country\" className=\"form-control\" value={country} required onChange={(e) => {setCountry(e.target.value)}}/>\r\n                                </div>\r\n\r\n                                <div className=\"form-group col-4\">\r\n                                    <label htmlFor=\"postal\">Postal</label>\r\n                                    <input type=\"text\" id=\"postal\" className=\"form-control\" value={postal} required onChange={(e) => {setPostal(e.target.value)}}/>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <button className=\"btn btn-primary btn-block\" type=\"submit\">Update</button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Profile\r\n"]},"metadata":{},"sourceType":"module"}